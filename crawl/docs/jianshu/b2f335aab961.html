<html><head>
<title>AndroidStudyDemo之Android6.x新控件介绍（一） - 简书</title><meta charset="utf-8"/>
</head>
<body></body></html><body><h3>AndroidStudyDemo之Android6.x新控件介绍（一）</h3><div class="show-content">
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-01b28b25702519a2.png?imageMogr2/auto-orient/strip%7CimageView2/2" src="http://upload-images.jianshu.io/upload_images/1233754-01b28b25702519a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
  <br/>
  <div class="image-caption">
   Android6.x新控件介绍（一）
  </div>
 </div>
 <h3>
  作者：
 </h3>
 <h3>
  时间：2016年4月21日
 </h3>
 <hr/>
 <p>
  接上篇：
 </p>
 <h1>
  一、FloatingActionButton
 </h1>
 <p>
  先看效果：
 </p>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-339f27b58add7544.png?imageMogr2/auto-orient/strip%7CimageView2/2" src="http://upload-images.jianshu.io/upload_images/1233754-339f27b58add7544.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
  <br/>
  <div class="image-caption">
   FloatingActionButton 效果演示
  </div>
 </div>
 <h2>
  简介
 </h2>
 <p>
  FloatingActionButton 就是浮动按钮，是兼容包中提供的一个控件，先来看看官方介绍：
 </p>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-83947b7863af8262.png?imageMogr2/auto-orient/strip%7CimageView2/2" src="http://upload-images.jianshu.io/upload_images/1233754-83947b7863af8262.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
  <br/>
  <div class="image-caption">
   FloatingActionButton 类
  </div>
 </div>
 <p>
  看下继承结构，这个很熟悉吧！继承自 ImageView，那么好办 ImageView 所拥有的属性 FloatingActionButton 应该都有（是不是都可以用那就有待考验了）。
 </p>
 <p>
  FloatingActionButton 提供了几个特有的属性：
 </p>
 <ul>
  <li>
   app:fabSize：控制 FloatingActionButton 的大小（PS：可以试一下设置 layout_width 的大小是否有作用），有两个取值
  </li>
 </ul>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-924b2ee7aed46f21.png?imageMogr2/auto-orient/strip%7CimageView2/2" src="http://upload-images.jianshu.io/upload_images/1233754-924b2ee7aed46f21.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
  <br/>
  <div class="image-caption">
   fabSize 的取值
  </div>
 </div>
 <ul>
  <li>
   app:backgroundTint：设置 FloatingActionButton 的背景色，默认为 Theme 主题中的 “colorAccent”（PS：可以试一下设置 background 是否有作用）
  </li>
  <li>
   app:elevation ：设置 FloatingActionButton 阴影的深度，默认有阴影
  </li>
 </ul>
 <p>
  对应的 Java 方法：
 </p>
 <ul>
  <li>
   --（fabSize 没找到）
  </li>
  <li>
   setBackgroundTintList()
  </li>
  <li>
   setElevation()
  </li>
 </ul>
 <h2>
  简单使用
 </h2>
 <p>
  <strong>
   1、导入兼容库
  </strong>
 </p>
 <pre><code class="java">compile 'com.android.support:design:23.3.0'</code></pre>
 <p>
  <strong>
   2、在 Layout 中使用
  </strong>
 </p>
 <pre><code class="java">&lt;android.support.design.widget.FloatingActionButton
    android:id="@+id/fabtn_test2"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignBottom="@+id/fabtn_test1"
    android:src="@mipmap/ic_alarm_add_black"
    app:fabSize="normal"
    app:backgroundTint="@color/colorPrimary"
    app:elevation="4dp"
    android:layout_centerHorizontal="true" /&gt;</code></pre>
 <p>
  <strong>
   3、代码中使用
  </strong>
  <br/>
  除了那几个特有的属性，可以直接把 FloatingActionButton 当作 ImageView 用即可。
 </p>
 <h2>
  注意事项
 </h2>
 <p>
  主要是属性设置方法的：
 </p>
 <ol>
  <li>
   android:background 设置背景不管用，得用 app:backgroundTint
  </li>
  <li>
   大小是 app:fabSize 控制的，layout_width 和 layout_height 不起作用
  </li>
 </ol>
 <h1>
  TextInputLayout
 </h1>
 <p>
  先看看效果：
 </p>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-9ae7511a4fdc3773.gif?imageMogr2/auto-orient/strip" src="http://upload-images.jianshu.io/upload_images/1233754-9ae7511a4fdc3773.gif?imageMogr2/auto-orient/strip"/>
  <br/>
  <div class="image-caption">
   TextInputLayout 演示
  </div>
 </div>
 <h2>
  简介
 </h2>
 <p>
  从上面的演示动画图中就可以看到，在 EditView 获取焦点的时候，EditView 上的 hint 提示文本通过一个动画显示到了 EditView 的左上角。其实该控件就是用于配合 EditView 的，主要为了解决 EditView 获得焦点后 hint 提示文本消失的问题。
 </p>
 <p>
  来看下官方的介绍：
 </p>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-0dcf9b7268c6d19b.png?imageMogr2/auto-orient/strip%7CimageView2/2" src="http://upload-images.jianshu.io/upload_images/1233754-0dcf9b7268c6d19b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
  <br/>
  <div class="image-caption">
   TextInputLayout 类
  </div>
 </div>
 <p>
  还是先看继承结构，继承自 LinearLayout，这个很熟悉啦！如果是 LinearLayout 的升级版那也没什么好介绍的了，在官方文档上有很简洁的介绍，抓住两个关键的地方（上图使用红色框圈出来了），再就是 xml 中新增的属性，也没有几个。
 </p>
 <p>
  直接用起来，看看效果不就清楚了，来看如何使用。
 </p>
 <h2>
  简单使用
 </h2>
 <p>
  <strong>
   1、导入兼容包
  </strong>
  <br/>
  和上面的一样
 </p>
 <p>
  <strong>
   2、在 Layout 中使用
  </strong>
 </p>
 <pre><code class="java">&lt;android.support.design.widget.TextInputLayout
    android:id="@+id/til_test1"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tv_textinputlayout_tip"
    android:layout_alignParentStart="true"&gt;
    &lt;EditText
        android:id="@+id/et_test1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" /&gt;
&lt;/android.support.design.widget.TextInputLayout&gt;</code></pre>
 <p>
  “
  <strong>
   注意：
  </strong>
  ”这里没有在 Layout 中使用 TextInputLayout 中所特有的属性，是在代码中设置的。
 </p>
 <p>
  <strong>
   3、在代码中使用
  </strong>
 </p>
 <pre><code class="java">private void initData() {
        // 设置提示文本
    mTestTIL.setHint("请输入你的邮箱：");
    mTestET1.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if (s.length() &gt; 10){
                                // 设置错误提示
                mTestTIL.setErrorEnabled(true);
                mTestTIL.setError("邮箱名过长！");
            }else{
                mTestTIL.setErrorEnabled(false);
            }
        }

        @Override
        public void afterTextChanged(Editable s) {
        }
    });
}</code></pre>
 <p>
  <strong>
   4、常用属性
  </strong>
  <br/>
  Layout 中：
 </p>
 <ul>
  <li>
   android:hint="Hint" ：设置提示文本
  </li>
  <li>
   app:hintAnimationEnabled="true" ：设置是否动画显示提示文本
  </li>
  <li>
   app:hintEnabled="true" ：设置提示是否可用
  </li>
  <li>
   app:errorEnabled="true" ：设置错误提示是否可用
  </li>
 </ul>
 <p>
  Java 代码中：
 </p>
 <ul>
  <li>
   setHint()：设置提示文本
  </li>
  <li>
   setHintAnimationEnabled()：设置是否动画显示提示文本
  </li>
  <li>
   setHintEnabled()：设置提示是否可用
  </li>
  <li>
   setErrorEnabled()：设置错误提示是否可用
  </li>
  <li>
   setError()：设置错误信息
  </li>
  <li>
   getEditText()：获取 TextInputLayout 中的 EditView
  </li>
 </ul>
 <h2>
  注意事项
 </h2>
 <ol>
  <li>
   TextInputLayout 是为了配合 EditText 来使用的，也就是说单独使用是没什么意义的
  </li>
  <li>
   TextInputLayout 可以设置错误提示，EditText 也可以设置错误提示，两者并不冲突，建议只选择设置其中一种错误提示（TextInputLayout 的要漂亮，不是吗）
  </li>
 </ol>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-16bae34bca47b77f.png?imageMogr2/auto-orient/strip%7CimageView2/2" src="http://upload-images.jianshu.io/upload_images/1233754-16bae34bca47b77f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
  <br/>
  <div class="image-caption">
   错误提示对比
  </div>
 </div>
 <h2>
  Snackbar
 </h2>
 <p>
  先看效果：
 </p>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-52d774ed65886b75.gif?imageMogr2/auto-orient/strip" src="http://upload-images.jianshu.io/upload_images/1233754-52d774ed65886b75.gif?imageMogr2/auto-orient/strip"/>
  <br/>
  <div class="image-caption">
   Snackbar 演示
  </div>
 </div>
 <h2>
  简介
 </h2>
 <p>
  Snackbar 是 design support library 中的一个组件，使用 Snackbar 可以在屏幕底部(大多时候)快速弹出消息，它与 Toast 非常相似，但是更灵活一些。
 </p>
 <ul>
  <li>
   介于Toast和AlertDialog之间轻量级控件
  </li>
  <li>
   可以很方便的提供消息的提示和动作反馈
  </li>
  <li>
   当它显示一段时间后或用户与屏幕交互时它会自动消失
  </li>
  <li>
   它是 context sensitive message，显示在所在屏幕最顶层
  </li>
 </ul>
 <p>
  来看下官方介绍：
 </p>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-9ea2909ae420f491.png?imageMogr2/auto-orient/strip%7CimageView2/2" src="http://upload-images.jianshu.io/upload_images/1233754-9ea2909ae420f491.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
  <br/>
  <div class="image-caption">
   Snackbar 类
  </div>
 </div>
 <p>
  继承自 Object，有点意外，继承结构的可参考性不大，那老老实实的看官方的介绍吧！
 </p>
 <p>
  看到那几个常量有没有很眼熟的感觉，下面两个的命名和 Toast 中的一模一样。
 </p>
 <p>
  来看看它提供的方法：
 </p>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-43df504a0102fa45.png?imageMogr2/auto-orient/strip%7CimageView2/2" src="http://upload-images.jianshu.io/upload_images/1233754-43df504a0102fa45.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
  <br/>
  <div class="image-caption">
   Snackbar 提供的方法
  </div>
 </div>
 <p>
  很眼熟，再看看这个会更眼熟：
 </p>
 <div class="image-package">
  <img data-original-src="http://upload-images.jianshu.io/upload_images/1233754-14040aed2a80ba8e.png?imageMogr2/auto-orient/strip%7CimageView2/2" src="http://upload-images.jianshu.io/upload_images/1233754-14040aed2a80ba8e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/>
  <br/>
  <div class="image-caption">
   Toast 常用方法
  </div>
 </div>
 <p>
  看到了吧！这货就是个“盗版”的Toast（汗，应该说是“山寨版”，还不对，官方的说法是类似升级版的 Toast，性能更高）。
 </p>
 <p>
  那看看怎么用吧！
 </p>
 <h2>
  简单使用
 </h2>
 <p>
  <strong>
   1、导入兼容包
  </strong>
  <br/>
  和上面一样
 </p>
 <p>
  <strong>
   2、显示普通的 Snackbar
  </strong>
 </p>
 <pre><code class="java">private void showCommonSB() {
    Snackbar snackbar = Snackbar.make(mRootRL,
            "我是普通 Snackbar", Snackbar.LENGTH_LONG);
    snackbar.show();
}</code></pre>
 <p>
  <strong>
   3、显示带 Action 的 Snackbar
  </strong>
 </p>
 <pre><code class="java">private void showWithActionSB() {
    final Snackbar snackbar = Snackbar.make(mRootRL,
            "我是带 Action 的 Snackbar", Snackbar.LENGTH_LONG);
    snackbar.setAction("撤销", new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(SnackBarActivity.this, "撤销成功", Toast.LENGTH_SHORT).show();
            snackbar.dismiss();
        }
    });
    snackbar.show();
}</code></pre>
 <p>
  <strong>
   4、使用 Snackbar 的 Callback
  </strong>
 </p>
 <pre><code class="java">private void setCallbackTest() {
    final Snackbar snackbar = Snackbar.make(mRootRL,
            "我是带 Action 的 Snackbar", Snackbar.LENGTH_LONG);
    snackbar.setAction("撤销", new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(SnackBarActivity.this, "撤销成功", Toast.LENGTH_SHORT).show();
            snackbar.dismiss();
        }
    });
    snackbar.setCallback(new Snackbar.Callback() {
        @Override
        public void onDismissed(Snackbar snackbar, int event) {
            super.onDismissed(snackbar, event);
            mShowResultTV.setText("Snackbar - onDismissed()");
        }
        @Override
        public void onShown(Snackbar snackbar) {
            super.onShown(snackbar);
            mShowResultTV.setText("Snackbar - onShown()");
        }
    });
    snackbar.show();
}</code></pre>
 <p>
  <strong>
   5、设置背景色
  </strong>
 </p>
 <pre><code class="java">private void changeBackground() {
    Snackbar snackbar = Snackbar.make(mRootRL,
            "我是普通 Snackbar", Snackbar.LENGTH_LONG);
    snackbar.getView().setBackgroundColor(getResources().getColor(android.R.color.holo_blue_bright));
    snackbar.show();
}</code></pre>
 <p>
  <strong>
   6、添加 CoordinatiorLayout
  </strong>
  <br/>
  Layout 中：
 </p>
 <pre><code class="java">&lt;android.support.design.widget.CoordinatorLayout
    android:id="@+id/cl_test"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentTop="true"
    android:layout_alignParentStart="true"&gt;
    &lt;android.support.design.widget.FloatingActionButton
        android:id="@+id/fabtn_test"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|right"
        android:src="@mipmap/ic_alarm_add_black"
        app:fabSize="normal"
        app:borderWidth="0dp"
        android:layout_marginBottom="@dimen/activity_vertical_margin"
        android:layout_marginRight="@dimen/activity_vertical_margin"/&gt;
&lt;/android.support.design.widget.CoordinatorLayout&gt;</code></pre>
 <p>
  Java 代码中：
 </p>
 <pre><code class="java">private void addCoordinatiorLayout() {
    mTestCL.setVisibility(View.VISIBLE);
    Snackbar snackbar = Snackbar.make(mTestCL,
            "我是普通 Snackbar", Snackbar.LENGTH_LONG);
    snackbar.getView().setBackgroundColor(getResources().getColor(android.R.color.holo_blue_bright));
    snackbar.show();
}</code></pre>
 <p>
  使用很简单，虽然没有使用 Builder 内部类，但是和使用 Buidler 的调用方式一样，这也是一个 Builder 模式的使用。
 </p>
 <h2>
  常用方法简介
 </h2>
 <ul>
  <li>
   方法：生成Snackbar消息，第一个参数是一个 View, Snackbar 会试着寻找一个父 View 来 hold 这个 View。Snackbar 将遍历整个 View tree 来寻找一个合适的父 View，它可能是一个 coordinatorLayout 也可能是 window decor’s content view，随便哪一个都行。
  </li>
  <li>
   方法：设置显示持续时间
  </li>
  <li>
   方法：设置 Action，第一个参数会作为按钮（Actiong）的文本，第二个参数是按钮的点击事件
  </li>
  <li>
   方法：Snackbar 的显示和消失会回调
   的 onDismissed()和 onShown()方法
  </li>
  <li>
   ()：获取 Snackbar 的 View
  </li>
 </ul>
 <h2>
  注意事项
 </h2>
 <ol>
  <li>
   利用好
   <strong>
    getView()
   </strong>
   方法来定制 Snackbar
  </li>
  <li>
   要支持 Snackbar 的更多特性（例如：向右滑动退出，适配
   <strong>
    FloatingActionButton
   </strong>
   ），那么需要使用
   <strong>
    CoordinatorLayout
   </strong>
  </li>
 </ol>
 <h1>
  小结
 </h1>
 <p>
  Android 6.x 的新控件介绍还有一篇，
 </p>
 <h1>
  项目地址
 </h1>
 <p>
 </p>
 <h1>
  参考
 </h1>
 <p>
  <br/>
  <br/>
  <br/>
  <br/>
  <br/>
 </p>
</div>
</body></html>